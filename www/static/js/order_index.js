"use strict";!function(){function t(t,a){var e={adressId:o,orderData:t};console.log(e),$.ajax({type:"POST",url:"/home/order/get_order",data:JSON.stringify(e),dataType:"json",contentType:"application/json",success:function(t){a(t)}})}function a(t){return t.attr||(t=$(t)),{orderId:t.attr("data-order-id"),itemNum:t.attr("data-item-num")}}function e(t){var a=void 0;t=$(t),t.hasClass("reduce")?(a=parseInt(t.next().html())-1||1,t.next().html(a)):t.hasClass("add")&&(a=parseInt(t.prev().html())+1,t.prev().html(a)),a&&t.parents(".item-el").attr("data-item-num",a)}var n=$(".item-el"),r=$(".item-box"),i=$(".wx-pay"),o=$(".adress-box").attr("data-adress-id"),d=[];r.on("click",function(t){e(t.target)}),i.on("click",function(e){e.preventDefault(),n.each(function(t,e){var n=a(e);d.push(n)}),t(d,function(t){0===t.errno?WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.data.appId,timeStamp:t.data.timeStamp,nonceStr:t.data.nonceStr,"package":t.data["package"],signType:t.data.signType,paySign:t.data.paySign},function(t){t.err_msg.match(/ok/)&&(alert("支付成功跳转到我的订单"),window.location.href="/home/order/list")}):alert(JSON.stringify(t))}),d=[]})}();