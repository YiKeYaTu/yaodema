"use strict";var buyCarController=function(){function o(o){e.css("display",o),r.css("display",o)}var e=$("#shadow"),r=$("#bottom");return{show:function(){o("block")},hide:function(){o("none")}}}(),orderKeeper=function(){var o={};return{keep:function(e){o[e]=e},"delete":function(e){delete o[e]},toReq:function(){var e="";for(var r in o)o.hasOwnProperty(r)&&(e+=r+"|");return e.slice(0,-1)}}}();!function(){$("#shadow").on("click",function(){buyCarController.hide()})}(),function(){var o=window.location.search.match(/item_id=.+/);o&&buyCarController.show()}(),function(){$(".order-con").on("click",function(){var o=$(this),e=o.children(".choose").children(".choose-inner");e.hasClass("choosed")?(orderKeeper["delete"](o.attr("data-order-id")),e.removeClass("choosed")):(orderKeeper.keep(o.attr("data-order-id")),e.addClass("choosed"))})}(),function(){$(".choose-all").on("click",function(){$(".order-con").each(function(o,e){return e.click()})})}(),function(){var o="/home/order/pay/";$(".wx-pay").on("click",function(e){return e.preventDefault(),orderKeeper.toReq()?void(window.location.href=o+"?order_id="+orderKeeper.toReq()):alert("你没有选取任何订单额")})}(),function(){$(".delete-item").on("click",function(o){o.preventDefault(),$.post("/home/order/delete_order",{order_list:orderKeeper.toReq()},function(o){0===o.errno?(alert("删除成功"),window.location.reload()):alert("删除失败，请稍后再试")})})}(),function(){$(".kouwei-con").on("click",function(o){$(".kouwei-con").children("button").map(function(o,e){$(e).css({color:"#cc9933",background:"#fff"})}),$(o.target).css({color:"#fff",background:"#cc9933"})}),$(".add").on("click",function(){$(".no-border")[0].innerHTML>0&&($(".no-border")[0].innerHTML=parseInt($(".no-border")[0].innerHTML)-1)}),$(".app").on("click",function(){$(".no-border")[0].innerHTML=parseInt($(".no-border")[0].innerHTML)+1}),$(".confirm").on("click",function(){var o=null;if($(".kouwei-con").children("button").map(function(e,r){console.log($(r).css("color")),"rgb(255, 255, 255)"==$(r).css("color")&&(o=r.id)}),!o)return void alert("请选择口味");var e=parseInt($(".no-border")[0].innerHTML);$.ajax({type:"POST",url:"http://www.hangeer1996.com/home/order/add_order",data:{goods_id:o,od_num:e},timeout:300,context:$("body"),success:function(o){alert("添加购物车成功"),window.history.back()},error:function(o,e){alert("Ajax error!")}})})}();